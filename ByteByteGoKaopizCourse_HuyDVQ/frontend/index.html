<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Load Balancer Dashboard - Master-Slave Demo</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="app">
        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-balance-scale"></i>
                    <span>Load Balancer</span>
                </div>
            </div>
            
            <div class="sidebar-menu">
                <a href="#dashboard" class="menu-item active" data-tab="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#servers" class="menu-item" data-tab="servers">
                    <i class="fas fa-server"></i>
                    <span>Servers</span>
                </a>
                <a href="#replication" class="menu-item" data-tab="replication">
                    <i class="fas fa-database"></i>
                    <span>Replication</span>
                </a>
                <a href="#requests" class="menu-item" data-tab="requests">
                    <i class="fas fa-exchange-alt"></i>
                    <span>Requests</span>
                </a>
                <a href="#analytics" class="menu-item" data-tab="analytics">
                    <i class="fas fa-chart-line"></i>
                    <span>Analytics</span>
                </a>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Bar -->
            <header class="topbar">
                <div class="topbar-left">
                    <button class="menu-toggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1 class="page-title">Dashboard</h1>
                </div>
                <div class="topbar-right">
                    <div class="status-indicator">
                        <div class="status-dot" id="statusDot"></div>
                        <span id="statusText">Connected</span>
                    </div>
                    <button class="btn btn-primary" onclick="refreshData()">
                        <i class="fas fa-sync-alt"></i>
                        Refresh
                    </button>
                </div>
            </header>

            <!-- Dashboard Tab -->
            <div class="tab-content active" id="dashboard">
                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-server"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="totalRequests">0</h3>
                            <p>Total Requests</p>
                            <span class="stat-change positive">+12%</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="avgResponseTime">0ms</h3>
                            <p>Avg Response Time</p>
                            <span class="stat-change negative">-5%</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="successRate">100%</h3>
                            <p>Success Rate</p>
                            <span class="stat-change positive">+2%</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-database"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="dbStatus">Online</h3>
                            <p>Database Status</p>
                            <span class="stat-change neutral">1M + 2S</span>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="action-section">
                    <h2>Quick Actions</h2>
                    <div class="action-grid">
                        <button class="action-btn" onclick="makeRequest()">
                            <i class="fas fa-paper-plane"></i>
                            <span>Send Request</span>
                        </button>
                        <button class="action-btn" onclick="testWriteOperation()">
                            <i class="fas fa-edit"></i>
                            <span>Test Write</span>
                        </button>
                        <button class="action-btn" onclick="testReadOperation()">
                            <i class="fas fa-eye"></i>
                            <span>Test Read</span>
                        </button>
                        <button class="action-btn" onclick="testLoadBalancing()">
                            <i class="fas fa-balance-scale"></i>
                            <span>Load Balance Test</span>
                        </button>
                        <button class="action-btn" onclick="testReplication()">
                            <i class="fas fa-sync"></i>
                            <span>Test Replication</span>
                        </button>
                        <button class="action-btn" onclick="runAllTests()">
                            <i class="fas fa-play-circle"></i>
                            <span>Run All Tests</span>
                        </button>
                    </div>
                </div>

                <!-- Response Panel -->
                <div class="response-panel">
                    <div class="panel-header">
                        <h3>Response</h3>
                        <div class="panel-actions">
                            <button class="btn btn-sm" onclick="copyResponse()">
                                <i class="fas fa-copy"></i>
                            </button>
                            <button class="btn btn-sm" onclick="clearResponse()">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                    <div class="response-content">
                        <pre id="responseText">Click an action button to see responses...</pre>
                    </div>
                </div>
            </div>

            <!-- Servers Tab -->
            <div class="tab-content" id="servers">
                <div class="servers-grid">
                    <div class="server-card">
                        <div class="server-header">
                            <h3>Backend Server 1</h3>
                            <div class="server-status online">Online</div>
                        </div>
                        <div class="server-info">
                            <div class="info-item">
                                <span class="label">Port:</span>
                                <span class="value">3001</span>
                            </div>
                            <div class="info-item">
                                <span class="label">Health:</span>
                                <span class="value" id="server1Health">Checking...</span>
                            </div>
                            <div class="info-item">
                                <span class="label">Master DB:</span>
                                <span class="value" id="server1Master">Unknown</span>
                            </div>
                            <div class="info-item">
                                <span class="label">Slave1 DB:</span>
                                <span class="value" id="server1Slave1">Unknown</span>
                            </div>
                            <div class="info-item">
                                <span class="label">Slave2 DB:</span>
                                <span class="value" id="server1Slave2">Unknown</span>
                            </div>
                        </div>
                        <button class="btn btn-sm" onclick="testServer(1)">Test</button>
                    </div>

                    <div class="server-card">
                        <div class="server-header">
                            <h3>Backend Server 2</h3>
                            <div class="server-status online">Online</div>
                        </div>
                        <div class="server-info">
                            <div class="info-item">
                                <span class="label">Port:</span>
                                <span class="value">3002</span>
                            </div>
                            <div class="info-item">
                                <span class="label">Health:</span>
                                <span class="value" id="server2Health">Checking...</span>
                            </div>
                            <div class="info-item">
                                <span class="label">Master DB:</span>
                                <span class="value" id="server2Master">Unknown</span>
                            </div>
                            <div class="info-item">
                                <span class="label">Slave1 DB:</span>
                                <span class="value" id="server2Slave1">Unknown</span>
                            </div>
                            <div class="info-item">
                                <span class="label">Slave2 DB:</span>
                                <span class="value" id="server2Slave2">Unknown</span>
                            </div>
                        </div>
                        <button class="btn btn-sm" onclick="testServer(2)">Test</button>
                    </div>

                    <div class="server-card">
                        <div class="server-header">
                            <h3>Backend Server 3</h3>
                            <div class="server-status online">Online</div>
                        </div>
                        <div class="server-info">
                            <div class="info-item">
                                <span class="label">Port:</span>
                                <span class="value">3003</span>
                            </div>
                            <div class="info-item">
                                <span class="label">Health:</span>
                                <span class="value" id="server3Health">Checking...</span>
                            </div>
                            <div class="info-item">
                                <span class="label">Master DB:</span>
                                <span class="value" id="server3Master">Unknown</span>
                            </div>
                            <div class="info-item">
                                <span class="label">Slave1 DB:</span>
                                <span class="value" id="server3Slave1">Unknown</span>
                            </div>
                            <div class="info-item">
                                <span class="label">Slave2 DB:</span>
                                <span class="value" id="server3Slave2">Unknown</span>
                            </div>
                        </div>
                        <button class="btn btn-sm" onclick="testServer(3)">Test</button>
                    </div>
                </div>
            </div>

            <!-- Replication Tab -->
            <div class="tab-content" id="replication">
                <div class="replication-panel">
                    <div class="panel-header">
                        <h3>Database Replication Status</h3>
                        <div class="panel-actions">
                            <button class="btn btn-sm" onclick="checkReplicationStatus()">
                                <i class="fas fa-sync-alt"></i>
                                Refresh
                            </button>
                            <button class="btn btn-sm" onclick="testReplication()">
                                <i class="fas fa-vial"></i>
                                Test
                            </button>
                        </div>
                    </div>
                    
                    <div class="replication-content">
                        <!-- Master Database -->
                        <div class="db-card master">
                            <div class="db-header">
                                <h4><i class="fas fa-database"></i> Master Database</h4>
                                <div class="db-status" id="masterStatus">Checking...</div>
                            </div>
                            <div class="db-info">
                                <div class="info-item">
                                    <span class="label">Host:</span>
                                    <span class="value">mysql-master:3306</span>
                                </div>
                                <div class="info-item">
                                    <span class="label">Role:</span>
                                    <span class="value">Write Operations</span>
                                </div>
                            </div>
                        </div>

                        <!-- Slave Databases -->
                        <div class="slaves-container">
                            <div class="db-card slave">
                                <div class="db-header">
                                    <h4><i class="fas fa-database"></i> Slave Database 1</h4>
                                    <div class="db-status" id="slave1Status">Checking...</div>
                                </div>
                                <div class="db-info">
                                    <div class="info-item">
                                        <span class="label">Host:</span>
                                        <span class="value">mysql-slave1:3306</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="label">Role:</span>
                                        <span class="value">Read Operations</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="label">IO Running:</span>
                                        <span class="value" id="slave1IO">Unknown</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="label">SQL Running:</span>
                                        <span class="value" id="slave1SQL">Unknown</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="label">Behind Master:</span>
                                        <span class="value" id="slave1Behind">Unknown</span>
                                    </div>
                                </div>
                            </div>

                            <div class="db-card slave">
                                <div class="db-header">
                                    <h4><i class="fas fa-database"></i> Slave Database 2</h4>
                                    <div class="db-status" id="slave2Status">Checking...</div>
                                </div>
                                <div class="db-info">
                                    <div class="info-item">
                                        <span class="label">Host:</span>
                                        <span class="value">mysql-slave2:3306</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="label">Role:</span>
                                        <span class="value">Read Operations</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="label">IO Running:</span>
                                        <span class="value" id="slave2IO">Unknown</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="label">SQL Running:</span>
                                        <span class="value" id="slave2SQL">Unknown</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="label">Behind Master:</span>
                                        <span class="value" id="slave2Behind">Unknown</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Replication Test Results -->
                    <div class="replication-test-results" id="replicationTestResults">
                        <h4>Replication Test Results</h4>
                        <div id="replicationTestContent">
                            <p>Click "Test" to run replication tests...</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Requests Tab -->
            <div class="tab-content" id="requests">
                <div class="requests-panel">
                    <div class="panel-header">
                        <h3>Recent Requests</h3>
                        <button class="btn btn-sm" onclick="refreshRequests()">
                            <i class="fas fa-sync-alt"></i>
                            Refresh
                        </button>
                    </div>
                    <div class="requests-list" id="requestsList">
                        <div class="empty-state">
                            <i class="fas fa-inbox"></i>
                            <p>No requests yet. Send a request to see data here.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Analytics Tab -->
            <div class="tab-content" id="analytics">
                <div class="analytics-panel">
                    <div class="panel-header">
                        <h3>Test Results</h3>
                        <div class="panel-actions">
                            <button class="btn btn-sm" onclick="exportResults()">
                                <i class="fas fa-download"></i>
                                Export
                            </button>
                        </div>
                    </div>
                    <div class="test-results" id="testResults">
                        <div class="empty-state">
                            <i class="fas fa-chart-line"></i>
                            <p>Run tests to see analytics here.</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toastContainer"></div>

    <script src="script.js"></script>
</body>
</html>